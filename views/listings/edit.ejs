<% layout("/layouts/boilerplate") %>
 <div class="row mt-5">
  <div class="col-8 offset-2">
      
    <h3>Edit your Listing</h3>
    <form 
    method="POST" 
      action="/listings/<%= listing._id %>?_method=PUT" 
       novalidate
       class="needs-validation"
       enctype="multipart/form-data"
       >
    
      <div class="mb-3">
         <label for="title" class="form-lable">Title</label>
         <input name="listing[title]"
          value="<%= listing.title %>"
          type="text" 
          class="form-control"
          required
          />
          <div class="invalid-feedback">Title looks good!</div>
      </div>
    
      <div class="md-3">
        <label for="description"
         class="form-lable"
         >Description</label>
        <textarea name="listing[description]"
         class="form-control" required>
          <%= listing.description %>
          </textarea>
          <div class="invalid-feedback">Please enter a short description</div>
      </div>
      
      <div class="mb-3">
        Original Listing Image <br>
        <img src=" <%=  originalImageUrl %> " >
      </div>

     <div class="mb-3">
      <label for="image" class="form-lable">Upload New Image</label>
      <input name="listing[image]"
       type="file"
       class="form-control"
        />
       
     </div>
      
     <div class="row">
     <div class="mb-3 col-md-4">
      <label for="price" class="form-lable">Price</label>
      <input name="listing[price]" 
      value="<%= listing.price %>"
       type="number"
      class="form-control"
      required
       />
       <div class="invalid-feedback">Price should be valid</div>
     </div>
     
      <div class="mb-3 col-md-8">
      <label for="country" class="form-lable">Country</label>
      <input
      name="listing[country]"
      value="<%= listing.country %>"
      type="text"
      class="form-control"
      required
    />
    <div class="invalid-feedback">Please enter a country</div>
    </div>
  </div>
     
      <div class="mb-3">
        <label for="location" class="form-lable">Location</label>
        <input
        name="listing[location]"
        value="<%= listing.location %>"
        type="text"
        class="form-control"
        required
      />
      <div class="invalid-feedback">Please enter a location</div>

      <div class="m-b3">
        <label for="category-added" class="form-label">Previous Category</label>
        <div class="category-added" id="category-added">
            <p><b>Selected :&nbsp;&nbsp;</b></p>
            <% for(categ of listing.category){ %>
                <p>
                    <%= categ %>&nbsp;&nbsp;
                </p>
                <% } %>
        </div>
    </div>
    <div class="m-b3">
        <label for="category" class="form-label">Choose Category</label>
        <div class="category-choose">
            <p><b>Single choose :</b> Click &nbsp;&nbsp;</p>
            <p><b>Multiple choose :</b> Ctrl + Click</p>
        </div>
        <select id="category" name="listing[category]"
        class="form-select border border-black border-opacity-50 mb-2"
          multiple required style="font-size: .95rem;">
           <option value="Trending">Trending</option>
           <option value="Rooms">Rooms</option>
           <option value="Icons cities">Icons cities</option>
           <option value="Mountains">Mountains</option>
           <option value="Castles">Castles</option>
           <option value="Amazing Pools">Amazing pools</option>
           <option value="Farms">Farms</option>
           <option value="Artic">Artic</option>
       </select>

      </div>
      
      <button class="btn btn-dark add-btn mt-3">Edit</button>
    </form>
  </div>
</div>

